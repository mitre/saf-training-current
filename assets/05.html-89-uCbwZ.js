import{_ as t}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as i,o as l,c as o,d as n,e,b as a,f as r}from"./app-WeARUK1X.js";const c={},p=n("h1",{id:"aws-testing-setup",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#aws-testing-setup","aria-hidden":"true"},"#"),e(" AWS Testing Setup")],-1),d=n("li",null,"Configure your AWS CLI and set up your AWS Credentials.",-1),u=n("li",null,[e("Test your AWS CLI access by running: "),n("code",null,"aws s3 ls"),e(".")],-1),h=n("li",null,"Clone the repository.",-1),v=n("li",null,"Navigate to the profile repository root directory.",-1),m=n("li",null,[e("Set the environment variable for the kitchen configuration file: "),n("code",null,"export KITCHEN_LOCAL_YAML=kitchen.ec2.yml"),e(".")],-1),k={href:"https://kitchen.ci/docs/drivers/aws/",title:"Test Kitchen AWS EC2 Driver Documentation",target:"_blank",rel:"noopener noreferrer"},b=n("li",null,[e("(Optional) Set a specific control to run: "),n("code",null,"export INSPEC_CONTROL='SV-230222'"),e(".")],-1),g=r(`<h1 id="running-through-the-aws-test-suite" tabindex="-1"><a class="header-anchor" href="#running-through-the-aws-test-suite" aria-hidden="true">#</a> Running Through the AWS Test Suite</h1><ol start="6"><li>List the kitchen instances with: <code>bundle exec kitchen list</code>. You should see something like this:</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>  Instance         Driver  Provisioner      Verifier  Transport  Last Action  Last Error
  vanilla-rhel-8   Ec2     AnsiblePlaybook  Inspec    Ssh        Verified     None
  hardened-rhel-8  Ec2     AnsiblePlaybook  Inspec    Ssh        Verified     None
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="7"><li>Create a kitchen instance: <code>bundle exec kitchen create vanilla</code>.</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>➜  redhat-enterprise-linux-8-stig-baseline git:<span class="token punctuation">(</span>main*<span class="token punctuation">)</span>bundle <span class="token builtin class-name">exec</span> kitchen create vanilla
-----<span class="token operator">&gt;</span> Starting Test Kitchen <span class="token punctuation">(</span>v3.5.1<span class="token punctuation">)</span>
-----<span class="token operator">&gt;</span> Creating <span class="token operator">&lt;</span>vanilla-rhel-<span class="token operator"><span class="token file-descriptor important">8</span>&gt;</span><span class="token punctuation">..</span>.
    <span class="token operator">&lt;</span> OTHER OUTPUT <span class="token operator">&gt;</span>
    Finished creating <span class="token operator">&lt;</span>vanilla-rhel-<span class="token operator"><span class="token file-descriptor important">8</span>&gt;</span> <span class="token punctuation">(</span>0m0.00s<span class="token punctuation">)</span>.
-----<span class="token operator">&gt;</span> Test Kitchen is finished. <span class="token punctuation">(</span>0m1.21s<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="8"><li>Converge the kitchen instance: <code>bundle exec kitchen converge</code>.</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>➜  redhat-enterprise-linux-8-stig-baseline git:<span class="token punctuation">(</span>main*<span class="token punctuation">)</span>bundle <span class="token builtin class-name">exec</span> kitchen converge vanilla
-----<span class="token operator">&gt;</span> Starting Test Kitchen <span class="token punctuation">(</span>v3.5.1<span class="token punctuation">)</span>
      NOTICE - Installing needed packages
      Updating Subscription Management repositories.
      Unable to <span class="token builtin class-name">read</span> consumer identity

      This system is not registered with an entitlement server. You can use subscription-manager to register.

      <span class="token number">39</span> files removed
      <span class="token operator">&lt;</span> LOTS OF OTHER OUTPUT <span class="token operator">&gt;</span>
      Downloading files from <span class="token operator">&lt;</span>vanilla-rhel-<span class="token operator"><span class="token file-descriptor important">8</span>&gt;</span>
      Finished converging <span class="token operator">&lt;</span>vanilla-rhel-<span class="token operator"><span class="token file-descriptor important">8</span>&gt;</span> <span class="token punctuation">(</span>0m21.36s<span class="token punctuation">)</span>.
-----<span class="token operator">&gt;</span> Test Kitchen is finished. <span class="token punctuation">(</span>1m13.52s<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="9"><li>Run InSpec on the kitchen instance: <code>bundle exec kitchen verify</code>.</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>    ➜  redhat-enterprise-linux-8-stig-baseline git:<span class="token punctuation">(</span>main*<span class="token punctuation">)</span>bundle <span class="token builtin class-name">exec</span> kitchen verify vanilla
  -----<span class="token operator">&gt;</span> Starting Test Kitchen <span class="token punctuation">(</span>v3.5.1<span class="token punctuation">)</span>
  -----<span class="token operator">&gt;</span> Setting up <span class="token operator">&lt;</span>vanilla-rhel-<span class="token operator"><span class="token file-descriptor important">8</span>&gt;</span><span class="token punctuation">..</span>.
        Finished setting up <span class="token operator">&lt;</span>vanilla-rhel-<span class="token operator"><span class="token file-descriptor important">8</span>&gt;</span> <span class="token punctuation">(</span>0m0.00s<span class="token punctuation">)</span>.
  -----<span class="token operator">&gt;</span> Verifying <span class="token operator">&lt;</span>vanilla-rhel-<span class="token operator"><span class="token file-descriptor important">8</span>&gt;</span><span class="token punctuation">..</span>.
        Loaded redhat-enterprise-linux-8-stig-baseline
  Could not determine patch status.
  Profile:   redhat-enterprise-linux-8-stig-baseline <span class="token punctuation">(</span>redhat-enterprise-linux-8-stig-baseline<span class="token punctuation">)</span>
  Version:   <span class="token number">1.12</span>.0
  Target:    ssh://ec2-user@34.229.216.179:22
  Target ID: 4c62a305-69eb-5ed6-9ee7-723cdc21c578

    ✔  SV-230222: RHEL <span class="token number">8</span> vendor packaged system security patches and updates must be installed and up to date.
      ✔  List of out-of-date packages is expected to be empty
  Profile Summary: <span class="token number">1</span> successful control, <span class="token number">0</span> control failures, <span class="token number">0</span> controls skipped
  Test Summary: <span class="token number">1</span> successful, <span class="token number">0</span> failures, <span class="token number">0</span> skipped
        Finished verifying <span class="token operator">&lt;</span>vanilla-rhel-<span class="token operator"><span class="token file-descriptor important">8</span>&gt;</span> <span class="token punctuation">(</span>0m5.38s<span class="token punctuation">)</span>.
  -----<span class="token operator">&gt;</span> Test Kitchen is finished. <span class="token punctuation">(</span>0m6.62s<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,9),f={start:"10"},_=n("li",null,[e("Destroy the kitchen instance: "),n("code",null,"bundle exec kitchen destroy vanilla"),e(".")],-1),x=n("li",null,[e("For steps that apply to making updates, patches, and updates to the profile, see the next section, "),n("a",{href:"#18-updating-the-profile"},"Updating the Profile"),e(".")],-1),T=n("li",null,[e("Your InSpec scan results are located in the "),n("code",null,"./spec/results/"),e(" directory, nameed "),n("code",null,"./spec/results/rhel-8_*"),e(".")],-1),y={href:"https://heimdall-lite.mitre.org",title:"MITRE Heimdall Lite",target:"_blank",rel:"noopener noreferrer"},S=n("code",null,"hardened",-1),L=n("code",null,"vanilla",-1);function C(I,E){const s=i("ExternalLinkIcon");return l(),o("div",null,[p,n("ol",null,[d,u,h,v,m,n("li",null,[e("This uses the "),n("a",k,[e("kitchen-ec2 driver"),a(s)]),e(".")]),b]),g,n("ol",f,[_,x,T,n("li",null,[e("Use "),n("a",y,[e("Heimdall Lite"),a(s)]),e(" to load both the "),S,e(" and "),L,e(' results to ensure your changes and updates, "failed as expected and passed as expected and covered your courner cases."')])])])}const O=t(c,[["render",C],["__file","05.html.vue"]]);export{O as default};
